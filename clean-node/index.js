const path = require('path')
const fs = require('fs')

const { ApolloServer, gql } = require('apollo-server');
const { ApolloServerPluginLandingPageGraphQLPlayground } = require('apollo-server-core');

const schema = fs.readFileSync(path.join(__dirname, 'schema.gql')).toString()

// ĞŸĞ¾ ÑÑ…ĞµĞ¼Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ñ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼ ÑÑ…ĞµĞ¼Ñ‹ Ğ² Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğµ. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ¼.
const typeDefs = gql(schema)

// Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğµ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğ¸Ñ‚ÑŒ DB
const dogs = [
  { id: 1, name: 'Ğ¨Ğ°Ñ€Ğ¸Ğº' },
  { id: 2, name: 'ĞœĞ°ĞºÑ' },
  { id: 3, name: 'Ğ›Ğ¾ĞºĞ¸' },
  { id: 4, name: 'Ğ‘ÑƒĞ±Ğ»Ğ¸Ğº' },
]
let nextDogId = 5

const toys = [
  { id: 1, name: 'ĞŸĞ»Ğ°ÑÑ‚Ğ¸ĞºĞ¾Ğ²Ğ°Ñ Ğ±ÑƒÑ‚Ñ‹Ğ»ĞºĞ°' },
  { id: 2, name: 'Ğ¥Ğ¾Ğ¼ÑĞº' },
  { id: 3, name: 'ĞœÑÑ‡Ğ¸Ğº' },
  { id: 4, name: 'ĞšĞ¾ÑÑ‚ÑŒ' },
]
let nextToyId = 5

/**
 * Ğ ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ñ‹, Ğ² Ñ€Ğ°Ğ¼ĞºĞ°Ñ… GraphQL Ğ¾Ğ½Ğ¸ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ñ‹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ»ĞµÑ€Ğ°Ğ¼ Ğ² REST API.
 *
 * ĞĞ±ÑŠĞµĞºÑ‚ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ğ¾Ğ² Ğ¼Ğ¾Ğ¶ĞµÑ‚ (Ğ½Ğ¾ Ğ½Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ğ½, Ğ¿Ğ¾ÑÑĞ½ĞµĞ½Ğ¸Ğµ - Ğ´Ğ°Ğ»ÑŒÑˆĞµ)
 * Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑÑ‚ÑŒ ÑĞ²Ğ¾ĞµĞ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹ ÑÑ…ĞµĞ¼Ñƒ.
 */
const resolvers = {
  /**
   * Ğ”Ğ»Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ²ÑĞµÑ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ² GET Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² REST)
   * Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Query. ĞšĞ»ÑÑ‡Ğ°Ğ¼Ğ¸ ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ² ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾
   * ÑÑ…ĞµĞ¼Ğµ. Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸ - Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒÑÑ.
   * 
   * ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ 4 Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ°:
   *   - parent - ÑÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¾Ğ±ÑŠĞµĞºÑ‚. ĞĞ± ÑÑ‚Ğ¾Ğ¼ Ğ½Ğ¸Ğ¶Ğµ
   *   - args - Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°. Ğ”Ğ»Ñ Ñ‚ĞµÑ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ², Ğ³Ğ´Ğµ ĞµÑÑ‚ÑŒ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹, Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹.
   *   - context - ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°. Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¼Ñ‹ ÑĞ°Ğ¼Ğ¸ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ñ€Ğ°ÑÑˆĞ°Ñ€Ğ¸Ñ‚ÑŒ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ.
   *     ĞœĞ¾Ğ¶Ğ½Ğ¾ Ñ€Ğ°ÑÑĞ¼Ğ°Ñ‚Ñ€Ğ¸Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾ ĞºĞ°Ğº Ğ¾Ğ±Ñ‰ÑƒÑ middleware, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ€Ğ°ÑÑˆĞ°Ñ€Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ,
   *     ÑĞ¾Ğ²ĞµÑ€ÑˆĞ°ÑÑ‰ĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ, ĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ñ‹ Ğº Ğ±Ğ´ Ğ¸ Ñ‚.Ğ´.
   *   - info - Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ñ‡Ñ‚Ğ¾ Ğ² Ğ½Ğ¸Ñ… Ñ Ñ…Ğ·, ÑÑƒĞ´Ñ Ğ¿Ğ¾ Ğ´Ğ¾ĞºĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ñ€ĞµĞ´ĞºĞ¾
   */
  Query: {
    getDog: (parent, args, context, info) => {
      // Ğ’ ÑĞ»ÑƒÑ‡Ğ°Ğµ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¼Ñ‹ Ğ¿Ğ¸ÑˆĞµĞ¼ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€ Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
      // Ğ’ÑÑ Ğ¸Ğ½Ñ„Ğ° Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ² Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ…
      console.log('args', args)
      const { id } = args
      const dog = dogs.find(dog => dog.id === Number(id))
      console.log('dog', dog)
      return dog
    },
    getDogs: () => {
      return dogs
    }
  },
  Dog: {
    /**
     * ĞŸĞ¾Ğ¼Ğ¸Ğ¼Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ğ° Ğ´Ğ»Ñ Query Ğ¼Ñ‹ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€ Ğ´Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ Ğ»ÑĞ±Ğ¾Ğ³Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°.
     * ĞšĞ°ĞºĞ¸Ğµ Ğ´Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ°:
     *    - Ğ¼Ñ‹ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ°Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ğ¼Ğ°ÑÑĞ¸Ğ² Ğ¸Ğ½Ñ„Ñ‹ Ğ¾ ÑĞ¾Ğ±Ğ°ĞºĞµ
     *      Ğ¸ ĞºĞ°Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€ÑƒÑˆĞºÑƒ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑĞ¾Ğ±Ğ°ĞºĞ¸
     * Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ Ğ¾Ğ±ÑŠĞµĞºÑ‚ parent Ğ±ÑƒĞ´ĞµÑ‚ ÑÑÑ‹Ğ»Ğ°Ñ‚ÑŒÑÑ Ğ½Ğ° Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¾Ğ±ÑŠĞµĞºÑ‚, Ğ° Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ - Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ğ°ĞºĞ¸,
     * ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ±Ñ‹Ğ»Ğ¾ Ğ·Ğ°Ñ€ĞµĞ·Ğ¾Ğ»Ğ²Ğ»ĞµĞ½Ğ½Ğ¾ Ñ€Ğ°Ğ½ĞµĞµ. Ğ¢.Ğµ. { id, name }
     * 
     * Ğ ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€ Ğ½Ğ° Ğ¿Ğ¾Ğ»Ğµ ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ‚Ğ¾Ğ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ, ĞµÑĞ»Ğ¸ Ğ² Ğ±Ğ¾Ğ»ĞµĞµ Ñ€Ğ°Ğ½Ğ½ĞµĞ¼ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ğµ ÑÑ‚Ğ¾ Ğ¿Ğ¾Ğ»Ğµ
     * Ğ½Ğµ Ğ±Ñ‹Ğ»Ğ¾ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¾.
     * 
     * ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞµ getDog Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ğ° ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ° Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ğ¾Ğ²:
     * Query.getDog -> Dog.favouriteToy
     * Ğ¸ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ğ½Ğ° Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ğ° Ğ¸Ğ¼ĞµĞ½Ğ½Ğ¾ Ğ¿Ğ¾ Ñ‚Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğµ, Ñ‡Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğµ getDog Ğ½Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ»Ğµ favouriteToy.
     */
    favouriteToy: (parent, args, context, info) => {
      // Ğ’ ÑĞ»ÑƒÑ‡Ğ°Ğµ ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğ°Ğ¼ Ğ½Ğ°Ğ´Ğ¾ Ğ·Ğ°Ñ€ĞµĞ·Ğ¾Ğ»Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ, Ğ²ÑÑ
      // Ğ¸Ğ½Ñ„Ñƒ Ğ¼Ñ‹ Ğ±ĞµÑ€ĞµĞ¼ Ğ¸Ğ· Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ°
      // ĞĞ¾ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¸ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹, Ğ²ÑĞµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚
      // ÑÑ…ĞµĞ¼Ñ‹
      // Ğ’ Ğ¾Ğ±Ñ‰ĞµĞ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ args - Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°
      const { id: dogId } = parent
      return toys.find(toy => toy.id === dogId)
    }
  },
  /**
   * Ğ’ GraphQL Ğ²ÑĞµ CUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ· CRUD Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ¼ÑƒÑ‚Ğ°Ñ†Ğ¸Ğ¸.
   * ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ Query Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² Ñ‚Ğ¾Ğ¼, Ñ‡Ñ‚Ğ¾ ÑĞµÑ€Ğ²ĞµÑ€ Ğ³Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¼ÑƒÑ‚Ğ°Ñ†Ğ¸Ğ¹,
   * Ñ‚Ğ¾Ğ³Ğ´Ğ° ĞºĞ°Ğº Query Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑÑ‚ÑŒÑÑ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾, Ğ¸Ğ±Ğ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ½Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹, Ñ…Ğ¾Ñ‚Ñ Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ‚Ğ°Ğº Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ ĞºĞ¾Ğ´.
   */
  Mutation: {
    /**
     * Ğ•ÑĞ»Ğ¸ Ğ²Ğ·Ğ³Ğ»ÑĞ½ÑƒÑ‚ÑŒ Ğ½Ğ° ÑÑ…ĞµĞ¼Ñƒ
     * 
     * type Mutation {
     *   addDog(dog: DogInput): Dog
     * }
     * 
     * Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞ²Ğ¸Ğ´ĞµÑ‚ÑŒ, Ñ‡Ñ‚Ğ¾ Ğ² ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ñ‚ÑƒÑ‚ Ğ¿Ñ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ÑÑ input, Ğ° Ğ½Ğµ type.
     * Ğ’ Ñ€Ğ°Ğ¼ĞºĞ°Ñ… GraphQL Ğ²ÑĞµ Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ Ğ´ĞµĞ»ÑÑ‚ÑÑ Ğ½Ğ° Ğ´Ğ²Ğ° Ğ²Ğ¸Ğ´Ğ° - type Ğ¸ input.
     * ĞŸĞµÑ€Ğ²Ñ‹Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ ĞºĞ°Ğº Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ, Ğ²Ñ‚Ğ¾Ñ€Ñ‹Ğµ ĞºĞ°Ğº Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹.
     * 
     * ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€ĞµĞ²Ğ°Ñ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ¾ ÑĞ²ÑĞ·Ğ°Ğ½Ğ¾ Ñ Ñ‚ĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ğ´Ğ»Ñ type Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·Ğ¾Ğ»Ğ²ĞµÑ€Ñ‹, Ğ° Ğ´Ğ»Ñ input - Ğ½ĞµÑ‚.
     * 
     * ĞšĞ°Ğº Ğ¸ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ğ»Ğ¾ÑÑŒ Ñ€Ğ°Ğ½Ğ½ĞµĞµ, Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ dog Ğ±ÑƒĞ´ĞµÑ‚ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒÑÑ Ğ² Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾ args
     */
    addDog: (parent, args, context, info) => {
      const id = nextDogId++
      dogs.push({
        id,
        name: args.dog.name
      })
      return dogs.find(dog => dog.id === id)
    },
    addToy: (parent, args, context, info) => {
      const id = nextToyId++
      toys.push({
        id,
        name: args.toy.name
      })
      return toys.find(toy => toy.id === id)
    }
  }
}

const server = new ApolloServer({
  typeDefs,
  resolvers,
  plugins: [
    // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ¿Ğ»ĞµĞ¹Ğ³Ñ€Ğ°ÑƒĞ½Ğ´ Ñ‚.Ğº. Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğ¹ Ğ²ĞµÑˆĞ°ĞµÑ‚ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ
    ApolloServerPluginLandingPageGraphQLPlayground()
  ]
})

server.listen(4444).then(info => {
  const { url } = info
  console.log(`ğŸš€ Server ready at ${url}`);
})
